name: Auto Update Structure with Style
on:
  push:
    paths:
      - 'index.html'

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Inject CSS and App Structure
        run: |
          # Menambahkan CSS Modern di dalam tag <style>
          CSS_CODE="<style>body{font-family:sans-serif;background:#f0f2f5;display:flex;justify-content:center;padding:20px}.app-card{background:white;padding:2rem;border-radius:12px;box-shadow:0 4px 6px rgba(0,0,0,0.1);width:100%;max-width:400px;text-align:center}button{background:#007bff;color:white;border:none;padding:10px 20px;border-radius:5px;cursor:pointer;margin-top:10px}</style>"
          
          if ! grep -q "<body>" index.html; then
            sed -i "1i<!DOCTYPE html><html><head><meta name='viewport' content='width=device-width, initial-scale=1.0'>$CSS_CODE</head><body><div class='app-card'>" index.html
            echo "</div></body></html>" >> index.html
          fi

      - name: Commit changes
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          git add index.html
          git commit -m "Otomatis: Update ke struktur aplikasi modern" || echo "No changes"
          git push
          
